"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createFacetContext = void 0;
const react_1 = require("react");
function createFacetContext(initialValue) {
    let warnedAboutInvalidAccess = false;
    const facet = {
        get: () => initialValue,
        observe: (listener) => {
            if (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test' && !warnedAboutInvalidAccess) {
                console.log(`Accessing a static facet created through createFacetContext, perhaps you're missing a Context Provider? initialValue: `, parseInitialValue(initialValue));
                warnedAboutInvalidAccess = true;
            }
            listener(initialValue);
            return () => { };
        },
    };
    const context = (0, react_1.createContext)(facet);
    return context;
}
exports.createFacetContext = createFacetContext;
function parseInitialValue(initialValue) {
    try {
        return JSON.stringify(initialValue, null, 2);
    }
    catch (e) {
        return initialValue;
    }
}
//# sourceMappingURL=createFacetContext.js.map